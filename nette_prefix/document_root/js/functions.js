	// var kQuiz = {	// 		// 	// 	kQuiz: function () { return this; }	// 		// };	var opera = (navigator.userAgent.indexOf("Opera") != -1) ? true : false;	var ff = (navigator.userAgent.indexOf("Firefox") != -1) ? true : false;	var msie = /*@cc_on!@*/false;	var msieold = false;	if ( msie ) {		msieold = (typeof window.XMLHttpRequest == -1) ? false : true;	}		function debug(str){		if ( ff ) {			console.log(str);		}		else		{						$("#debug").html($("#debug").html() + "<br />" + str);					}	}		var kQuiz = function(config) {	var kQuiz = { 						updateSnippet: function (id, html) {				$("#" + id).html(html);			},			submitCallback: function (response) {				kQuiz.form_submitted = true;				if ( kQuiz.question.type != "multi" ) {					$('#qform :input').attr('disabled', false);					$("#frmqform-useranswer").focus(); // v opere nefunguje priamo				}				return true;			}, // End of callback						submit: function () {				if ( $("#frmqform-useranswer") && $("#frmqform-useranswer").val() == "" ) {					$("#frmqform-useranswer").focus();										return false;				} else if ( kQuiz.question.type == "multi"  && $('#qform :input:checkbox:checked').length == 0 ) {					alert("!");										return false;				}				var send_values = {};				var values = $("#qform").serializeArray();				// todo lepsi selektor cez childs formu				// $('#qform :input').attr('disabled', true);								for (var i = 0; i < values.length; i++) {					var name = values[i].name;					// multi					if ( name in send_values ) {						var val = send_values[name];						if ( !(val instanceof Array) ) {							val = [val];						}						val.push(values[i].value);						send_values[name] = val;					} else {						send_values[name] = values[i].value;					}				}								$('#qform :input').attr('disabled', true);								jQuery.ajax({					url: $("#qform").attr("action"),					data: send_values,					type: $("#qform").attr("method"),					success: kQuiz.submitCallback				});								return true;			}, // End of processAnswer			quizCountDown: function () {				var elm = $("#quiz-countdown"); // todo toto je blbost na entu				var timer_val = parseInt(elm.html());				if ( timer_val != 0  && !isNaN(timer_val) ) {					elm.html(timer_val - 1)				} else {					elm.html('<span class="small">Please wait Loading quiz..</span>');					clearInterval(kQuiz.cdi); // Queiz CountDownInterval					$.getJSON(kQuiz.url, null, kQuiz.initData);				}				return true;			}, // End of countDown						questionCountDown: function () {				var elm = $("#question-timer"); // todo toto je blbost na entu				var timer_val = Math.min(kQuiz.question.remaining_time, parseInt(elm.html()));								if ( timer_val > 1 && !isNaN(timer_val) ) {					elm.html(timer_val - 1)				} else {					var str = ( kQuiz.made_questions == kQuiz.questions ) ? 'Please wait, loading next question...' : 'Please wait, evaluate quiz..';					elm.html('<span class="small">'+str+'</span>');					$('#qform :input').attr('disabled', true);					clearInterval(kQuiz.qcdi); // questionCountDownInterval					kQuiz.getAnswer();					// setInterval(kQuiz.getAnswer, 10000);				}								return true;			}, // End of countDown												initData: function (data) {				if ( data.snippets ) {					for (var i in data.snippets ) {						kQuiz.updateSnippet(i, data.snippets[i]);					}		 		}				if ( data.quiz ) 				{					var q = data.quiz;										kQuiz.made_questions = ( q.made_questions ) ? q.made_questions * 1 : 0;					kQuiz.questions = ( q.questions ) ? q.questions * 1 : 0;										if ( q.run == 1 )					{						if ( typeof(kQuiz.run) == "undefined" ) {							kQuiz.run = 1;							$("#qform").submit( 								function() {									kQuiz.submit();										return false;								}							);						}												if ( data.question ) {							kQuiz.initQuestion(data.question);						}					} 					else if ( typeof(q.time) != "undefined" &&  q.datetime_end == null )					{						 if ( q.time < 300 ) 						 {							$("#quiz-countdown").html(q.time);							kQuiz.cdi = setInterval(kQuiz.quizCountDown, 1000);						}						else 						{						 //  kviz nebezi a zaroven je predpokladany cas do spustenia viac ako 5 minut poslem request za polovicu stavajuceho casu							setTimeout(function() { $.getJSON(kQuiz.url, null, kQuiz.initData); }, Math.round( (q.time * 1000) / 2) );						}					}				}				if ( data.hint )				{					if ( kQuiz.question.type == "multi" )					{						var elms = $("#frmqform-answer"+data.hint);						elms.parent().addClass("invalid");						// $("#frmqform-answer"+response.hint).attr('disabled', true);					}					else 					{						$("#frmqform-answer").val(data.hint);					}										if ( data.question ) {						kQuiz.question.remaining_time = data.question.remaining_time;					}				}				// fix pre nadbytocny request sposobeny zaokruhlenim nadol pre rychlejsie vykonanie hintu				if ( data.remaining_num_hints == 0 ) {					clearInterval(kQuiz.hint_int);				}				if ( data.answer ) {					if ( kQuiz.question.type == "multi" )					{						// TODO nejaky lepsi selektor na moznosti, ( podla classy? )						var answers = data.answer;						var elms = $("#qform :input:checkbox");						var elm = "";						for ( var i = 0; i < elms.length; i++ ) 						{							elm = elms[i];							if ( jQuery.inArray(elm.value, answers) != -1 ) {								$(elm).parent().addClass("correct");								if ( elm.checked && elm.disabled ) {									$(elm).parent().addClass("valid-checked");								}							} else {								$(elm).parent().addClass("invalid");								if ( elm.checked  && elm.disabled ) {									$(elm).parent().addClass("invalid-checked");								}							}						}					}					else 					{						$("#frmqform-answer").val(data.answer);					}					setTimeout(function() { $.getJSON(kQuiz.url, null, kQuiz.initData); } , Math.min(Math.floor(Math.random() * 4500 + 1000), 4500));				}								return true;			}, // End of initData			getHint: function () {				$.getJSON(kQuiz.hint_url + kQuiz.question.id, null, kQuiz.initData);				return true;			}, // End of getHint			getAnswer: function () {				clearInterval(kQuiz.hint_int);				$.getJSON(kQuiz.answer_url + kQuiz.question.id, null, kQuiz.initData);				return true;			}, // End of getAnswer						initQuestion: function (question) {				kQuiz.question = question;				kQuiz.form_submitted = false;				$("#question-timer").html(kQuiz.question.remaining_time);				kQuiz.qcdi = setInterval(kQuiz.questionCountDown, 1000);				if ( kQuiz.question.num_hints != 0 ) {					var hp = Math.round(( kQuiz.question.remaining_time / 100 ) * ( 100 / ( kQuiz.question.num_hints + 1 ) ));					kQuiz.hint_int = setInterval(kQuiz.getHint, hp * 1000);				}			},				init: function(config) {				this.url = ( config.url ) ? config.url : null;				this.hint_url = ( config.hint_url ) ? config.hint_url : null;				this.answer_url = ( config.answer_url ) ? config.answer_url : null;				this.initData(config);			}		};			kQuiz.init(config);		return kQuiz;	};$(function () {	if ( typeof(quiz_config) != "undefined" ) {		var myQuiz = new kQuiz(quiz_config);	}});