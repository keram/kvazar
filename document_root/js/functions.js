	// var kQuiz = {	// 		// 	// 	kQuiz: function () { return this; }	// 		// };		var kQuiz = function(config) {	var kQuiz = { 						submitCallback : function (response) {				kQuiz.form_submitted = true;								return true;			}, // End of callback						submit : function () {				var sendValues = {};				var values = $(kQuiz.form).serializeArray();				// todo lepsi selektor cez childs formu				$('#qform :input').attr('disabled', true);								for (var i = 0; i < values.length; i++) {					var name = values[i].name;					// multi					if (name in sendValues) {						var val = sendValues[name];						if (!(val instanceof Array)) {							val = [val];						}						val.push(values[i].value);						sendValues[name] = val;					} else {						sendValues[name] = values[i].value;					}				}				jQuery.ajax({					url: $(kQuiz.form).attr("action"),					data: sendValues,					type: $(kQuiz.form).attr("method"),					success: kQuiz.submitCallback				});								return true;			}, // End of processAnswer						countDown : function () {				var timerValue = parseInt(kQuiz.timer.innerHTML);				if ( timerValue != 0  && !isNaN(timerValue)) {					kQuiz.timer.innerHTML = timerValue - 1;				} else {					clearInterval(kQuiz.timerInterval);				}								return true;			}, // End of countDown						updateSnippet : function (id, html) {				$("#" + id).html(html);			},									bindData : function (response) {				if ( response.question ) {					if ( response.question.id != kQuiz.active_question.id ) {						clearInterval(kQuiz.timerInterval);						kQuiz.init_question(response.question);					}				}				else 				{				}								if (response.snippets) {					for (var i in response.snippets) {						kQuiz.updateSnippet(i, response.snippets[i]);					}		 		}				return true;			}, // End of bindData						update : function () {				clearInterval(kQuiz.hintInterval);				if ( !kQuiz.form_submitted ) 				{					if ( kQuiz.active_question.type == "multi" )					{						if ( $("#qform :input:checkbox:checked").length != 0 )						{							kQuiz.submit();						}					}				}								kQuiz.getAnswer();			},			bindHint : function (response) {				if (response.hint) {					if ( kQuiz.active_question.type == "multi" )					{						var elms = $("#frmqform-answer"+response.hint);						elms.parent().addClass("invalid");						// $("#frmqform-answer"+response.hint).attr('disabled', true);					}					else 					{					}										// fix pre nadbytocny request sposobeny zaokruhlenim nadol pre rychlejsie vykonanie hintu					if ( !response.hints ) {						clearInterval(kQuiz.hintInterval);					}				}				return true;			}, // End of bindHint			getHint : function () {				$.getJSON(kQuiz.hint_url + kQuiz.active_question.id, null, kQuiz.bindHint);				return true;			}, // End of getHint			bindAnswer : function (response) {				if (response.answer) {					if ( kQuiz.active_question.type == "multi" )					{						// TODO nejaky lepsi selektor na moznosti, ( podla classy? )						var answers = response.answer;						var elms = $("#qform :input:checkbox");						var correct_elms = [];												for ( var i = 0; i < answers.length; i++ ) {							correct_elms[correct_elms.length] = $("#frmqform-answer"+answers[i]).get(0);							// correct_elms[correct_elms.length].parent().addClass("correct");						}						for ( var i = 0; i < elms.length; i++ ) {							if ( correct_elms.indexOf(elms[i]) != -1 ) {								$(elms[i]).parent().addClass("correct");								if ( elms[i].checked ) {									$(elms[i]).parent().addClass("valid-checked");								}							} else {								$(elms[i]).parent().addClass("invalid");								if ( elms[i].checked ) {									$(elms[i]).parent().addClass("invalid-checked");								}							}						}																	}					else 					{					}				}				setTimeout(function() { $.getJSON(kQuiz.url, null, kQuiz.bindData); } , 5000);								return true;			}, // End of bindAnswer			getAnswer : function () {				$.getJSON(kQuiz.answer_url + kQuiz.active_question.id, null, kQuiz.bindAnswer);				return true;			}, // End of getAnswer						init_question : function (question) {				this.active_question = question;				this.form_submitted = false;								if ( this.timer ) {					this.timer.innerHTML = this.active_question.time;					this.timerInterval = setInterval(this.countDown, 1000);				}								//  sekundu pred koncom submitnem a pockam na odpovede ( pre istotu aby bola odpoved uzivatela odoslana) 				this.updateTimeout = setTimeout(this.update, (this.active_question.time * 1000) - 1000);				if ( this.active_question.hints != 0) {					var hp = Math.round(( this.active_question.time / 100 ) * ( 100 / ( this.active_question.hints + 1 ) ));					this.hintInterval = setInterval(this.getHint, hp * 1000);				}			},				init : function(config) {				this.form = $("#qform").get(0);				this.timer = $("#question-timer").get(0);				this.url = ( config.url ) ? config.url : null;				this.hint_url = ( config.hint_url ) ? config.hint_url : null;				this.answer_url = ( config.answer_url ) ? config.answer_url : null;				if ( config.question ) 				{					this.init_question(config.question);				}			}		};			kQuiz.init(config);		return kQuiz;	};$(function () {	if ( typeof(quiz_config) != "undefined" ) {		var myQuiz = new kQuiz(quiz_config);	}				// kazdych 30 sekund updatnem pocet prihlasenych ludi	if ($("#logged-users")) {		var refreshId = setInterval(function()		{			$.get('/?do=loggedUsers');		}, 60000);	}});